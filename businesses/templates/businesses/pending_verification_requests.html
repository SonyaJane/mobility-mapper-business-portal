{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pending_verification_requests.css' %}">
{% endblock %}

{% block page_title %}Businesses Requesting Wheeler Verification{% endblock %}

{% block content %}
<div class="content-container p-2">
  <h4 class="mb-3">Businesses Requesting Wheeler Verification</h4>
  <p>The following businesses have requested verification of their accessibility features. You can help verify them and receive a Â£10 Amazon voucher per verification.</p>
  {% if businesses %}
    <ul class="list-group">
      {% for business in businesses %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ business.business_name }}</strong><br>
            {{ business.address }}<br>
            <span class="text-muted">Accessibility features: {{ business.accessibility_features.all|join:", " }}</span>
          </div>
          <div class="d-flex flex-column">
            <a href="{% url 'business_detail' business.id %}" class="btn btn-primary mb-2">View Business</a>
            {% if business.id in approved_business_ids and business.id not in already_verified_business_ids %}
              <a href="{% url 'wheeler_verification_form' business.id %}" class="btn btn-success">Submit Verification</a>
            {% elif business.id in already_verified_business_ids %}
              <span class="badge bg-secondary">Already Verified</span>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="alert alert-info">No businesses are currently requesting verification.</div>
  {% endif %}
</div>
{% endblock %}
